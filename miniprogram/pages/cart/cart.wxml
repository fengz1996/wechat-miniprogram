<view class="cart-container">
  <!-- 收货地址栏 -->
  <view class="address-bar" bindtap="editAddress">
    <block wx:if="{{address}}">
      <view class="address-info">
        <text class="address-name">{{address.name}}</text>
        <text class="address-phone">{{address.phone}}</text>
        <text class="address-detail">{{address.detail}}</text>
      </view>
      <view class="address-edit">修改地址</view>
    </block>
    <block wx:else>
      <view class="address-empty">
        <text>请选择收货地址</text>
        <view class="address-add">+ 添加地址</view>
      </view>
    </block>
  </view>

  <!-- 购物车商品列表 -->
  <block wx:if="{{cartItems.length > 0}}">
    <view class="cart-list">
      <view class="cart-item" wx:for="{{cartItems}}" wx:key="id">
        <image class="cart-img" src="{{item.image}}" mode="aspectFill"></image>
        <view class="cart-info">
          <view class="cart-title">{{item.name}}</view>
          <view class="cart-desc">{{item.desc}}</view>
          <view class="cart-bottom">
            <view class="cart-price">¥{{item.price}}</view>
            <view class="cart-qty">
              <button class="qty-btn" size="mini" data-index="{{index}}" bindtap="decreaseQuantity">-</button>
              <text class="qty-num">{{item.quantity}}</text>
              <button class="qty-btn" size="mini" data-index="{{index}}" bindtap="increaseQuantity">+</button>
            </view>
          </view>
        </view>
        <button class="del-btn" size="mini" data-index="{{index}}" bindtap="removeItem">删除</button>
      </view>
    </view>
  </block>
  <block wx:else>
    <view class="empty-cart">
      <image src="../../images/empty_cart.png" class="empty-img"></image>
      <view class="empty-text">购物车空空如也</view>
      <button class="empty-btn" bindtap="goShopping">去首页逛逛</button>
    </view>
  </block>

  <!-- 底部结算栏 -->
  <view class="cart-footer">
    <view class="footer-left">
      <text>合计：</text>
      <text class="footer-price">¥{{totalPrice}}</text>
    </view>
    <button class="checkout-btn" bindtap="checkout" disabled="{{cartItems.length === 0}}">
      去结算 ({{selectedCount}})
    </button>
  </view>
</view>